<!--
 Copyright 2025 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<div class="lg:container lg:mx-auto">
  <div class="home-margin grid grid-cols-1">
    <div class="video-container mb-8">
      <!-- Text for Tablet and beyond -->
      <div
        class="hidden md:flex justify-center items-center w-full h-full absolute flex-col"
      >
        <h1
          class="text-center justify-center text-white text-2xl font-bold !m-0 !z-[50]"
        >
          Creative Studio Fun Templates
        </h1>
        <p class="mt-4 text-lg leading-8 text-white !z-[50]">
          A showcase of Templates for images, videos, audio and more ✨
        </p>
      </div>
      <div
        class="gradient-bg hidden md:block !relative !w-full !h-full !z-[10]"
      >
        <svg xmlns="http://www.w3.org/2000/svg">
          <defs>
            <filter id="goo">
              <feGaussianBlur
                in="SourceGraphic"
                stdDeviation="10"
                result="blur"
              />
              <feColorMatrix
                in="blur"
                mode="matrix"
                values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8"
                result="goo"
              />
              <feBlend in="SourceGraphic" in2="goo" />
            </filter>
          </defs>
        </svg>
        <div class="gradients-container absolute top-0 left-0">
          <div class="g1"></div>
          <div class="g2"></div>
          <div class="g3"></div>
          <div class="g4"></div>
          <div class="g5"></div>
          <div #interactiveBubble class="interactive"></div>
        </div>
      </div>

      <!-- Text for mobile -->
      <div
        class="flex flex-col justify-center items-center w-full h-full md:hidden"
      >
        <!-- As this svg uses a gradient, it needs to have a different fill id, therefore we have one for mobile and other for larger devices -->
        <div class="flex">
          <mat-icon
            svgIcon="mobile-white-gemini-spark-icon"
            class="!w-6 !h-6 mr-2 md:mr-[1rem]"
          ></mat-icon>
          <div
            class="text-center justify-center text-white title-font font-bold"
          >
            Creative Studio Fun Templates
          </div>
        </div>
        <p class="mt-4 text-white text-center md:text-lg md:leading-8">
          A showcase of Templates for images, videos, audio and more ✨
        </p>
      </div>
    </div>




<div
      *ngIf="isLoading"
      class="flex flex-col items-center justify-center mt-8 text-center"
    >
      <mat-progress-spinner
        color="primary"
        mode="indeterminate"
      ></mat-progress-spinner>
      <p class="pt-5 text-white">Loading Creative Templates...</p>
    </div>

    <div *ngIf="!isLoading">
      <div class="flex flex-wrap items-center gap-2 mb-6">
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Industry</mat-label>
          <mat-select
            [(ngModel)]="templateFilter.industry"
            (selectionChange)="applyFilters()"
          >
            <mat-option *ngFor="let industry of industries" [value]="industry">
              {{ industry }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Media Type</mat-label>
          <mat-select
            [(ngModel)]="templateFilter.mediaType"
            (selectionChange)="applyFilters()"
          >
            <mat-option *ngFor="let type of mediaTypes" [value]="type">
              {{ type | titlecase }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Search by Name</mat-label>
          <input
            matInput
            [(ngModel)]="templateFilter.name"
            (input)="applyFilters()"
            placeholder="e.g., Rolex"
          />
        </mat-form-field>

        <button
          mat-stroked-button
          (click)="clearFilters()"
          class="clear-filters-btn"
        >
          Clear Filters
        </button>
      </div>

      <div
        *ngIf="filteredTemplates.length > 0; else noResults"
        class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"
      >
        <div
          *ngFor="let template of filteredTemplates; trackBy: trackById"
          class="template-card group"
          (click)="useTemplate(template)"
        >
          <div class="relative overflow-hidden rounded-t-lg">
            <img
              [src]="template.thumbnail_uri"
              [alt]="template.name"
              class="object-cover w-full h-48 transition-transform duration-300 group-hover:scale-105"
            />
            <div
              class="absolute inset-0 flex items-center justify-center transition-all duration-300 bg-black bg-opacity-0 group-hover:bg-opacity-60"
            >
              <span
                class="p-2 px-4 text-sm font-bold text-white transition-opacity duration-300 opacity-0 rounded-full bg-black/50 group-hover:opacity-100"
              >
                Use Template
              </span>
            </div>
          </div>
          <div class="p-4">
            <div class="flex items-center justify-between">
              <h3 class="text-lg font-bold text-white">{{ template.name }}</h3>
              <span
                class="px-2 py-1 text-xs font-semibold rounded-full"
                [ngClass]="{
                  'bg-blue-500/20 text-blue-300':
                    template.media_type === 'video/mp4',
                  'bg-purple-500/20 text-purple-300':
                    template.media_type === 'image/png'
                }"
              >
                {{ template.media_type | titlecase }}
              </span>
            </div>
            <p class="mt-2 text-sm text-gray-400">
              {{ template.description }}
            </p>
            <div class="mt-3">
              <mat-chip-listbox aria-label="Template Tags">
                <mat-chip *ngFor="let tag of template.tags.slice(0, 3)">{{
                  tag
                }}</mat-chip>
              </mat-chip-listbox>
            </div>
          </div>
        </div>
      </div>
    </div>

    <ng-template #noResults>
      <div class="py-16 text-center text-gray-500">
        <p>No templates found matching your criteria.</p>
        <button mat-button (click)="clearFilters()" class="mt-4">
          Reset Filters
        </button>
      </div>
    </ng-template>


  </div>
</div>
